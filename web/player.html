<!DOCTYPE html>
<html>
<head>
    <title>{video_title}</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
        }
        .video-container {
            position: relative;
            width: 100%;
            height: 100vh;
        }
        .video-js {
            width: 100%;
            height: 100%;
        }
        .video-js .vjs-control-bar {
            background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.7));
        }
        .video-container .overlay-filename {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #fff;
            background: rgba(0,0,0,0.7);
            padding: 5px 10px;
            border-radius: 3px;
            font-family: Arial, sans-serif;
            z-index: 1000;
        }
        .video-container .settings-button {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            cursor: pointer;
            padding: 5px;
            background: rgba(0,0,0,0.7);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="video-container">
        <video id="video-player" class="video-js" controls preload="metadata">
            <source src="{hls_path}" type="application/x-mpegURL">
        </video>
        <div class="overlay-filename">{filename}</div>
        <div class="settings-button" onclick="toggleSettings()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#fff">
                <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.43-.48-.43h-3.84c-.24 0-.43.19-.47.43l-.36 2.54c-.59.24-1.13.56-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.3-.06.62-.06.94s.02.64.06.94l-2.03 1.58c-.18.14-.23.41-.12-.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.43.48.43h3.84c.24 0 .44-.19.47-.43l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            try {
                if (typeof videojs === 'undefined') {
                    console.error('Video.js is not loaded');
                    return;
                }
                const player = videojs('video-player', {
                    fluid: true,
                    responsive: true,
                    autoplay: {should_autoplay},
                    muted: {should_autoplay},
                    html5: {
                        hls: {
                            enableLowInitialPlaylist: true,
                            overrideNative: true
                        }
                    },
                    controlBar: {
                        volumePanel: { inline: true },
                        fullscreenToggle: true,
                        pictureInPictureToggle: true
                    }
                });

                player.ready(function() {
                    console.log('Video.js player is ready');
                    if ({should_autoplay}) {
                        player.play().catch(function(err) {
                            console.error('Autoplay failed:', err);
                        });
                    }
                });

                player.on('error', function() {
                    console.error('Video.js error:', player.error());
                    player.errorDisplay.open();
                });
            } catch (e) {
                console.error('Error initializing Video.js:', e);
            }
        });

        function toggleSettings() {
            console.log('Settings button clicked');
            // Add settings menu toggle logic later
        }
    </script>
</body>
</html>